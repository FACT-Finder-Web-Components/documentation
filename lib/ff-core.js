(function(a,c){"object"===typeof exports&&exports&&"string"!==typeof exports.nodeName?c(exports):"function"===typeof define&&define.amd?define(["exports"],c):(a.Mustache={},c(a.Mustache))})(window,function(a){function c(a){return"function"===typeof a}function l(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function w(a,e){return null!=a&&"object"===typeof a&&e in a}function t(B,R){function E(a){"string"===typeof a&&(a=a.split(H,2));if(!I(a)||2!==a.length)throw Error("Invalid tags: "+a);
    t=new RegExp(l(a[0])+"\\s*");p=new RegExp("\\s*"+l(a[1]));w=new RegExp("\\s*"+l("}"+a[1]))}if(!B)return[];var c=[],k=[],h=[],g=!1,v=!1,t,p,w;E(R||a.tags);for(var u=new n(B),F,q,x,G;!u.eos();){F=u.pos;if(x=u.scanUntil(t)){G=0;for(var C=x.length;G<C;++G)if(q=x.charAt(G),e.call(d,q)?v=!0:h.push(k.length),k.push(["text",q,F,F+1]),F+=1,"\n"===q){if(g&&!v)for(;h.length;)delete k[h.pop()];else h=[];v=g=!1}}if(!u.scan(t))break;g=!0;q=u.scan(Q)||"name";u.scan(r);"="===q?(x=u.scanUntil(M),u.scan(M),u.scanUntil(p)):
    "{"===q?(x=u.scanUntil(w),u.scan(N),u.scanUntil(p),q="&"):x=u.scanUntil(p);if(!u.scan(p))throw Error("Unclosed tag at "+u.pos);G=[q,x,F,u.pos];k.push(G);if("#"===q||"^"===q)c.push(G);else if("/"===q){q=c.pop();if(!q)throw Error('Unopened section "'+x+'" at '+F);if(q[1]!==x)throw Error('Unclosed section "'+q[1]+'" at '+F);}else"name"===q||"{"===q||"&"===q?v=!0:"="===q&&E(x)}if(q=c.pop())throw Error('Unclosed section "'+q[1]+'" at '+u.pos);return K(J(k))}function J(a){for(var e=[],E,d,c=0,k=a.length;c<
k;++c)if(E=a[c])"text"===E[0]&&d&&"text"===d[0]?(d[1]+=E[1],d[3]=E[3]):(e.push(E),d=E);return e}function K(a){for(var e=[],d=e,c=[],k,h=0,g=a.length;h<g;++h)switch(k=a[h],k[0]){case "#":case "^":d.push(k);c.push(k);d=k[4]=[];break;case "/":d=c.pop();d[5]=k[2];d=0<c.length?c[c.length-1][4]:e;break;default:d.push(k)}return e}function n(a){this.tail=this.string=a;this.pos=0}function p(a,e){this.view=a;this.cache={".":this.view};this.parent=e}function g(){this.cache={}}var D=Object.prototype.toString,
    I=Array.isArray||function(a){return"[object Array]"===D.call(a)},e=RegExp.prototype.test,d=/\S/,k={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},r=/\s*/,H=/\s+/,M=/\s*=/,N=/\s*\}/,Q=/#|\^|\/|>|\{|&|=|!/;n.prototype.eos=function(){return""===this.tail};n.prototype.scan=function(a){a=this.tail.match(a);if(!a||0!==a.index)return"";a=a[0];this.tail=this.tail.substring(a.length);this.pos+=a.length;return a};n.prototype.scanUntil=function(a){a=this.tail.search(a);
    var e;switch(a){case -1:e=this.tail;this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,a),this.tail=this.tail.substring(a)}this.pos+=e.length;return e};p.prototype.push=function(a){return new p(a,this)};p.prototype.lookup=function(a){var e=this.cache,d;if(e.hasOwnProperty(a))d=e[a];else{for(var k=this,h,g,r=!1;k;){if(0<a.indexOf("."))for(d=k.view,h=a.split("."),g=0;null!=d&&g<h.length;)g===h.length-1&&(r=w(d,h[g])),d=d[h[g++]];else d=k.view[a],r=w(k.view,a);if(r)break;k=k.parent}e[a]=
    d}c(d)&&(d=d.call(this.view));return d};g.prototype.clearCache=function(){this.cache={}};g.prototype.parse=function(e,d){var c=this.cache,k=c[e];null==k&&(k=c[e+":"+(d||a.tags).join(":")]=t(e,d));return k};g.prototype.render=function(a,e,d){var c=this.parse(a);e=e instanceof p?e:new p(e);return this.renderTokens(c,e,d,a)};g.prototype.renderTokens=function(a,e,d,c){for(var k="",h,g,v,r=0,l=a.length;r<l;++r)v=void 0,h=a[r],g=h[0],"#"===g?v=this.renderSection(h,e,d,c):"^"===g?v=this.renderInverted(h,
    e,d,c):">"===g?v=this.renderPartial(h,e,d,c):"&"===g?v=this.unescapedValue(h,e):"name"===g?v=this.escapedValue(h,e):"text"===g&&(v=this.rawValue(h)),void 0!==v&&(k+=v);return k};g.prototype.renderSection=function(a,e,d,k){function h(a){return g.render(a,e,d)}var g=this,r="",v=e.lookup(a[1]);if(v){if(I(v))for(var l=0,n=v.length;l<n;++l)r+=this.renderTokens(a[4],e.push(v[l]),d,k);else if("object"===typeof v||"string"===typeof v||"number"===typeof v)r+=this.renderTokens(a[4],e.push(v),d,k);else if(c(v)){if("string"!==
    typeof k)throw Error("Cannot use higher-order sections without the original template");v=v.call(e.view,k.slice(a[3],a[5]),h);null!=v&&(r+=v)}else r+=this.renderTokens(a[4],e,d,k);return r}};g.prototype.renderInverted=function(a,e,d,c){var k=e.lookup(a[1]);if(!k||I(k)&&0===k.length)return this.renderTokens(a[4],e,d,c)};g.prototype.renderPartial=function(a,e,d){if(d&&(a=c(d)?d(a[1]):d[a[1]],null!=a))return this.renderTokens(this.parse(a),e,d,a)};g.prototype.unescapedValue=function(a,e){var d=e.lookup(a[1]);
    if(null!=d)return d};g.prototype.escapedValue=function(e,d){var c=d.lookup(e[1]);if(null!=c)return a.escape(c)};g.prototype.rawValue=function(a){return a[1]};a.name="mustache.js";a.version="2.3.0";a.tags=["{{","}}"];var h=new g;a.clearCache=function(){return h.clearCache()};a.parse=function(a,e){return h.parse(a,e)};a.render=function(a,e,d){if("string"!==typeof a)throw e=TypeError,a=I(a)?"array":typeof a,new e('Invalid template! Template should be a "string" but "'+a+'" was given as the first argument for mustache#render(template, view, partials)');
    return h.render(a,e,d)};a.to_html=function(e,d,k,h){e=a.render(e,d,k);if(c(h))h(e);else return e};a.escape=function(a){return String(a).replace(/[&<>"'`=\/]/g,function(a){return k[a]})};a.Scanner=n;a.Context=p;a.Writer=g;return a});
(function(a,c){"object"===typeof exports&&exports&&"string"!==typeof exports.nodeName?c(exports):"function"===typeof define&&define.amd?define(["exports"],c):(a.Mustache={},c(a.Mustache))})(window,function(a){function c(a){return"function"===typeof a}function l(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function w(a,e){return null!=a&&"object"===typeof a&&e in a}function t(c,k){function h(a){"string"===typeof a&&(a=a.split(H,2));if(!I(a)||2!==a.length)throw Error("Invalid tags: "+a);
    O=new RegExp(l(a[0])+"\\s*");D=new RegExp("\\s*"+l(a[1]));P=new RegExp("\\s*"+l("}"+a[1]))}if(!c)return[];var g=[],p=[],t=[],w=!1,v=!1,O,D,P;h(k||a.tags);for(var u=new n(c),F,q,x,G;!u.eos();){F=u.pos;if(x=u.scanUntil(O)){G=0;for(var C=x.length;G<C;++G)if(q=x.charAt(G),e.call(d,q)?v=!0:t.push(p.length),p.push(["text",q,F,F+1]),F+=1,"\n"===q){if(w&&!v)for(;t.length;)delete p[t.pop()];else t=[];v=w=!1}}if(!u.scan(O))break;w=!0;q=u.scan(Q)||"name";u.scan(r);"="===q?(x=u.scanUntil(M),u.scan(M),u.scanUntil(D)):
    "{"===q?(x=u.scanUntil(P),u.scan(N),u.scanUntil(D),q="&"):x=u.scanUntil(D);if(!u.scan(D))throw Error("Unclosed tag at "+u.pos);G=[q,x,F,u.pos];p.push(G);if("#"===q||"^"===q)g.push(G);else if("/"===q){q=g.pop();if(!q)throw Error('Unopened section "'+x+'" at '+F);if(q[1]!==x)throw Error('Unclosed section "'+q[1]+'" at '+F);}else"name"===q||"{"===q||"&"===q?v=!0:"="===q&&h(x)}if(q=g.pop())throw Error('Unclosed section "'+q[1]+'" at '+u.pos);return K(J(p))}function J(a){for(var e=[],d,c,k=0,h=a.length;k<
h;++k)if(d=a[k])"text"===d[0]&&c&&"text"===c[0]?(c[1]+=d[1],c[3]=d[3]):(e.push(d),c=d);return e}function K(a){for(var e=[],d=e,c=[],k,h=0,g=a.length;h<g;++h)switch(k=a[h],k[0]){case "#":case "^":d.push(k);c.push(k);d=k[4]=[];break;case "/":d=c.pop();d[5]=k[2];d=0<c.length?c[c.length-1][4]:e;break;default:d.push(k)}return e}function n(a){this.tail=this.string=a;this.pos=0}function p(a,e){this.view=a;this.cache={".":this.view};this.parent=e}function g(){this.cache={}}var D=Object.prototype.toString,
    I=Array.isArray||function(a){return"[object Array]"===D.call(a)},e=RegExp.prototype.test,d=/\S/,k={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},r=/\s*/,H=/\s+/,M=/\s*=/,N=/\s*\}/,Q=/#|\^|\/|>|\{|&|=|!/;n.prototype.eos=function(){return""===this.tail};n.prototype.scan=function(a){a=this.tail.match(a);if(!a||0!==a.index)return"";a=a[0];this.tail=this.tail.substring(a.length);this.pos+=a.length;return a};n.prototype.scanUntil=function(a){a=this.tail.search(a);
    var e;switch(a){case -1:e=this.tail;this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,a),this.tail=this.tail.substring(a)}this.pos+=e.length;return e};p.prototype.push=function(a){return new p(a,this)};p.prototype.lookup=function(a){var e=this.cache,d;if(e.hasOwnProperty(a))d=e[a];else{for(var k=this,h,g,r=!1;k;){if(0<a.indexOf("."))for(d=k.view,h=a.split("."),g=0;null!=d&&g<h.length;)g===h.length-1&&(r=w(d,h[g])),d=d[h[g++]];else d=k.view[a],r=w(k.view,a);if(r)break;k=k.parent}e[a]=
    d}c(d)&&(d=d.call(this.view));return d};g.prototype.clearCache=function(){this.cache={}};g.prototype.parse=function(e,d){var c=this.cache,k=c[e];null==k&&(k=c[e+":"+(d||a.tags).join(":")]=t(e,d));return k};g.prototype.render=function(a,e,d){var c=this.parse(a);e=e instanceof p?e:new p(e);return this.renderTokens(c,e,d,a)};g.prototype.renderTokens=function(a,e,d,c){for(var k="",h,g,r,l=0,n=a.length;l<n;++l)r=void 0,h=a[l],g=h[0],"#"===g?r=this.renderSection(h,e,d,c):"^"===g?r=this.renderInverted(h,
    e,d,c):">"===g?r=this.renderPartial(h,e,d,c):"&"===g?r=this.unescapedValue(h,e):"name"===g?r=this.escapedValue(h,e):"text"===g&&(r=this.rawValue(h)),void 0!==r&&(k+=r);return k};g.prototype.renderSection=function(a,e,d,k){function h(a){return g.render(a,e,d)}var g=this,r="",l=e.lookup(a[1]);if(l){if(I(l))for(var n=0,p=l.length;n<p;++n)r+=this.renderTokens(a[4],e.push(l[n]),d,k);else if("object"===typeof l||"string"===typeof l||"number"===typeof l)r+=this.renderTokens(a[4],e.push(l),d,k);else if(c(l)){if("string"!==
    typeof k)throw Error("Cannot use higher-order sections without the original template");l=l.call(e.view,k.slice(a[3],a[5]),h);null!=l&&(r+=l)}else r+=this.renderTokens(a[4],e,d,k);return r}};g.prototype.renderInverted=function(a,e,d,k){var c=e.lookup(a[1]);if(!c||I(c)&&0===c.length)return this.renderTokens(a[4],e,d,k)};g.prototype.renderPartial=function(a,e,d){if(d&&(a=c(d)?d(a[1]):d[a[1]],null!=a))return this.renderTokens(this.parse(a),e,d,a)};g.prototype.unescapedValue=function(a,e){var d=e.lookup(a[1]);
    if(null!=d)return d};g.prototype.escapedValue=function(e,d){var k=d.lookup(e[1]);if(null!=k)return a.escape(k)};g.prototype.rawValue=function(a){return a[1]};a.name="mustache.js";a.version="2.3.0";a.tags=["{{","}}"];var h=new g;a.clearCache=function(){return h.clearCache()};a.parse=function(a,e){return h.parse(a,e)};a.render=function(a,e,d){if("string"!==typeof a)throw e=TypeError,a=I(a)?"array":typeof a,new e('Invalid template! Template should be a "string" but "'+a+'" was given as the first argument for mustache#render(template, view, partials)');
    return h.render(a,e,d)};a.to_html=function(e,d,k,h){e=a.render(e,d,k);if(c(h))h(e);else return e};a.escape=function(a){return String(a).replace(/[&<>"'`=\/]/g,function(a){return k[a]})};a.Scanner=n;a.Context=p;a.Writer=g;return a});var __extends=this&&this.__extends||function(a,c){function l(){this.constructor=a}for(var w in c)c.hasOwnProperty(w)&&(a[w]=c[w]);a.prototype=null===c?Object.create(c):(l.prototype=c.prototype,new l)},factfinder;
(function(a){(function(a){a.logLevel="";(function(a){a.isDebug=a.isDebug||!0;a.isLog=a.isLog||!0;a.isProduction=a.isProduction||!1;a.log=function(c){a.isLog&&!a.isProduction&&console.log(c)};a.error=function(c){if(!a.isProduction)try{console.error(c)}catch(t){console.log(c)}};a.debug=function(c){if(a.isDebug&&!a.isProduction)try{console.debug(c)}catch(t){console.log(c)}}})(a.Logger||(a.Logger={}))})(a.common||(a.common={}))})(factfinder||(factfinder={}));
(function(a){a.isReady=!1})(factfinder||(factfinder={}));
(function(a){(function(c){function l(a){var d;if(null==a||"object"!=typeof a)return a;if(a instanceof Array){d=[];for(var k=0,c=a.length;k<c;k++)d[k]=l(a[k]);return d}if(a instanceof Object){d={};for(k in a)a.hasOwnProperty(k)&&(d[k]=l(a[k]));return d}throw Error("Unable to copy obj! Its type isn't supported.");}function w(a,d){d=d.toUpperCase();var c=a.parentNode;if(c&&c.nodeName)return c.nodeName===d?c:w(c,d)}function t(a){a||(a=window.location.href);return a.split("?")[1]}function J(a,d){var c=
    {};if(a)for(var g=a.split("&"),l=0;l<g.length;l++){var n=g[l],n=n.split("="),t=n[0],n=!0===d?p(n[1]):n[1];c[t]?c[t].push(n):c[t]=[n]}return c}function K(e){var d="",c=!0,g;for(g in e){var d=d+(c?"":"&"),c=!1,n=e[g];if(a.common.isArray(n))for(var l=0;l<n.length;l++)d+=g+"="+n[l],d+=l!==n.length-1?"&":"";else d+=g+"="+n}return"?"+d}function n(a){return encodeURIComponent(a).replace(/[!'()*]/g,function(a){return"%"+a.charCodeAt(0).toString(16)})}function p(a){return decodeURIComponent(a.replace(/\+/g,
    " "))}function g(e){for(var d in e){var c=e[d];if(a.common.isArray(c)){e[d]=[];for(var g=0;g<c.length;g++){var l=c[g];D(d,l)&&e[d].push(n(l))}}else D(d,c)&&(e[d]=[n(e[d])])}return e}function D(a,d){return a.match(/^ff-.*/)||"object"===typeof d||"function"===typeof d||"number"===typeof d?!1:!0}function I(e){for(var d in e)if(a.common.isArray(e[d])){var c=e[d];e[d]=[];for(var g=0;g<c.length;g++)e[d].push(p(c[g]))}else e[d]=[p(e[d])];return e}c.elementToString=function(a){if(a&&1===a.nodeType){var d=
    document.createElement("div");d.appendChild(a);return d.innerHTML}return""};c.stringToElement=function(a){var d=document.createElement("div");d.innerHTML=a;return 1<d.childElementCount?d.children:d.firstElementChild};c.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)};c.transitionEndEventName=function(){var a=document.createElement("div"),d={transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},c;
    for(c in d)if(d.hasOwnProperty(c)&&void 0!==a.style[c])return d[c]};c.setStyleProperty=function(a,d,c){c.style[a]=d};c.concatFunctions=function(e,d){return function(){if(e)try{e.apply(window,arguments)}catch(c){a.common.Logger.error("could not invoke function fn1 ["+e+"] got error: "+c)}if(d)try{d.apply(window,arguments)}catch(c){a.common.Logger.error("could not invoke function fn2 ["+e+"] got error: "+c)}}};c.addEventListener=function(e,d,c){try{return e.addEventListener?e.addEventListener(d,c):
    e.attachEvent?e.attachEvent("on"+d,c):e[d]=c,!0}catch(g){return a.common.Logger.error("could not add eventlistener: "+g),!1}};c.whenBrowserReady=function(e){function d(){if("complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState){if(!0===a.isReady){try{e.call(window)}catch(d){a.common.Logger.error(d)}return!0}document.addEventListener("ffReady",function(){try{e.call(window)}catch(d){a.common.Logger.error(d)}return!0})}return!1}if(!0!==d())var c=setInterval(function(){!0===
d()&&window.clearInterval(c)},50)};c.cloneObject=l;c.copyHTMLAttributes=function(e,d){try{for(var c=e.attributes,g=0;g<c.length;g++){var n=c[g];try{"for-group"!==n.name&&d.setAttribute(n.name,n.value)}catch(l){a.common.Logger.error(l)}}}catch(l){a.common.Logger.error("could not copy attribute: "+l)}};c.isCustomElement=function(a){return 1===a.nodeType?-1<a.tagName.indexOf("-"):!1};c.whichTransitionEvent=function(){var a,d=document.createElement("fakeelement"),c={WebkitTransition:"webkitTransitionEnd",
    MozTransition:"transitionend",MSTransition:"msTransitionEnd",OTransition:"oTransitionEnd",transition:"transitionend"};for(a in c)if(void 0!==d.style[a])return c[a]};c.getParentElementByName=w;c.urlStringToDict=function(a){return(a=t(a))?J(a):{}};c.getParameterString=t;c.parameterStringToDict=J;c.dictToParameterString=K;c.setUrlParameter=function(a,d){var c=window.location.href.split("?"),g=J(c[1]);void 0!==d?g[a]=d:delete g[a];var n={};try{n=history.state}catch(l){}history.replaceState(n,"",c[0]+
    K(g))};c.encodeUrl=function(a){var d=a.split("?");a=d[0];d=J(d[1]);g(d);d=K(d);return a+d};c.fixedEncodeURIComponent=n;c.fixedDecodeURIComponent=p;c.encodeDict=g;c._canEncode=D;c.decodeUrl=function(a){var d=a.split("?");a=d[0];d=J(d[1]);I(d);d=K(d);return a+d};c.decodeDict=I;c.getKeyByPattern=function(a,d){var c,g=[];for(c in a)a.hasOwnProperty(c)&&d.test(c)&&g.push(c);return g};c.mergeProperties=function(a,d){var c={},g;for(g in d){var n=d[g];void 0!==n&&""!==n&&(c[g]=d[g])}for(var l in a)void 0===
c[l]&&(c[l]=a[l]);return c};c.getCurrentEndPathString=function(a){a||(a=window.location.href);-1<a.indexOf("http://")?a=a.replace("http://",""):-1<a.indexOf("https://")&&(a=a.replace("https://",""));a=a.split("/");return 1===a.length?t(a[0]):a[a.length-1]};c.fireCustomEvent=function(c,d,g,n){var l=document.createEvent("Event");l.initEvent(c,d,g);n=n?n:document;try{n.dispatchEvent(l)}catch(p){a.common.Logger.error(p)}};c.replaceAt=function(a,d,c){var g=c.length;0===c.length&&(g=1);return a.substr(0,
    d)+c+a.substr(d+g)};c.removeAt=function(a,d,c){if(!(d+c>a.length))return a.substr(0,d)+a.substr(d+c)};c.randomString=function(a){for(var d="",c=0;c<a;c++)d+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return d};c.isFFParameter=function(a){return a&&(a.match(/^filter.+/g)||a.match(/^sort.+/g)||"channel"===a||"query"===a||"sid"===a||"productsPerPage"===a||"page"===a||"searchField"===a||"noArticleNumberSearch"===a||"useAsn"===a||"useFoundWords"===
    a||"useCampaigns"===a||"navigation"===a||"idsOnly"===a||"useKeywords"===a||"generateAdvisorTree="===a||"disableCache"===a||"followSearch"===a||"usePersonalization"===a||"useSemanticEnhancer"===a||"useAso"===a||"omitContextName"===a||"log"===a)};c.localStorage={store:{},setItem:function(c,d){this.isSupported()?void 0!==d?window.localStorage.setItem(c,d):window.localStorage.removeItem(c):void 0!==d?this.store[c]=d:delete this.store[c];"ff-basket"===c&&a.common.fireCustomEvent("ff-basket-changed",!0,
        !1,document)},getItem:function(a){return this.isSupported()?window.localStorage.getItem(a):this.store[a]},isSupported:function(){var a=window.localStorage;try{return a.setItem("test","1"),a.removeItem("test"),!0}catch(c){return!1}}};c.removeChildNodes=function(a){if(a)for(;a.firstChild;)a.removeChild(a.firstChild)};c.isOk=function(a){return void 0!==a&&null!==a&&""!==a}})(a.common||(a.common={}))})(factfinder||(factfinder={}));
(function(a){(a.libs||(a.libs={})).mustache=Mustache})(factfinder||(factfinder={}));
(function(a){(function(c){function l(){for(var a="",f=0;30>f;f++)a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789 ".charAt(Math.floor(63*Math.random()));return a}function w(a,f,m,c,d){m=d.split("?")[0];d=m.split("/");return-1!==m.indexOf("rest")&&4<=d.length?(m=d.slice(d.length-4,d.length-1).join("/"),btoa(m)in T?""+c._r.setRequestHeader(a,f):""):btoa(d[d.length-1])in T?""+c._r.setRequestHeader(a,f):""}function t(b){var f=a.communication.globalCommunicationParameter;if(f.addParams){var m=
    f.addParams.trim().split(",");try{for(var c=0;c<m.length;c++){var d=m[c];try{var y=d.split("="),e=y[0].trim(),L=y[1].trim();b[e]=L}catch(h){}}}catch(h){}}if(!0===f.keepFilters&&(m=a.communication.FFCommunicationEventAggregator.currentSearchResult)&&(m=m.filters))for(c=0;c<m.length;c++)d=m[c],b["filter"+d.name]=d.valueList[0].value;if(f.keepUrlParams){m=f.keepUrlParams.trim().split(",");d=a.common.urlStringToDict();try{if(1===m.length&&"all"===m[0])for(var V in d)a.common.isFFParameter(V)||(b[V]=d[V]);
else for(c=0;c<m.length;c++){var k=m[c].trim();k&&d&&d[k]&&(b[k]=d[k])}}catch(h){}}!1===f.useAsn&&(b.useAsn="false");1==f.useFoundWords&&(b.useFoundWords="true");0==f.useCampaigns&&(b.useCampaigns="false");1==f.generateAdvisorTree&&(b.generateAdvisorTree="true");1==f.disableCache&&(b.disableCache="true");0==f.usePersonalization&&(b.usePersonalization="false");0==f.useSemanticEnhancer&&(b.useSemanticEnhancer="false");0==f.useAso&&(b.useAso="false");1==f.useSeo&&a.communication.Util.handleSeoSearch(b);
    a.communication.globalCommunicationParameter.singleHitRedirect&&"true"===a.common.localStorage.getItem("ff_no_redirect")&&(b.ff_no_redirect=!0,a.common.localStorage.setItem("ff_no_redirect"));g(b);f=b.url?b.url:A.buildSearchRequestUrl(b);n(f,b,!0)}function J(b,f,m,c,d){var y={};a.communication.sessionManager.checkSession(y);y.type="navigation";y.startLevel=b;y.endLevel=f;y.initialNavigation=!0;y.navigation=!0;y.success=function(b){var y=f+1,e=y+c;e<=m+c&&(10<e&&(e=10),e>m&&(e=m),window.setTimeout(function(){J(y,
    e,m,c,d)},d));a.communication.ResultDispatcher.dispatchNavigationFrame(b)};K(y)}function K(a){var f=a.url?a.url:A.buildInitialNavigationRequestUrl(a);n(f,a,!1)}function n(a,f,m){a=new G(a,m,f.type);a.s(f.success);a.f(f.fail);a.a(f.always);a.se()}function p(b,f){b.success=b.success?a.common.concatFunctions(f,b.success):f}function g(b,f){p(b,function(m){m&&m.searchResult&&m.searchResult.fieldRoles&&(a.communication.fieldRoles=m.searchResult.fieldRoles);I(b,m);"productCampaign"===b.type||"pageCampaigns"===
b.type?m&&D(m):D((m.searchResult||m).campaigns);if(m.searchResult){m.searchResult.timedOut&&C.debug("FACT-Finder Timeout for request: "+b.type);var c;a:{if("search"===b.type&&a.communication.globalCommunicationParameter.singleHitRedirect&&!b.ff_no_redirect&&(c=m.searchResult,"resultsFound"===c.resultStatus&&c.records&&1==c.records.length)){var d=m.searchResult.records[0].record;(c=d.Deeplink)||a.communication.fieldRoles&&(c=d[a.communication.fieldRoles.deeplink]);if(c){a.common.localStorage.setItem("ff_no_redirect",
    "true");d=a.communication.globalCommunicationParameter.singleHitRedirectBasePath;a.common.isOk(d)&&(c=d+c);window.open(c,"_self");c=!1;break a}else console.log("no deeplink in record to auto load product page")}c=!0}if(!c)return;if("sort"===b.type||"ppp"===b.type||"paging"===b.type){var y,e;a.communication.FFCommunicationEventAggregator.currentSearchResult&&(y=a.communication.FFCommunicationEventAggregator.currentSearchResult.groups,e=a.communication.FFCommunicationEventAggregator.currentSearchResult.breadCrumbTrailItems);
    a.communication.FFCommunicationEventAggregator.currentSearchResult=m.searchResult;a.communication.FFCommunicationEventAggregator.currentSearchResult.groups=y;a.communication.FFCommunicationEventAggregator.currentSearchResult.breadCrumbTrailItems=e;y=JSON.parse(JSON.stringify(m));y.searchResult=a.communication.FFCommunicationEventAggregator.currentSearchResult;history.replaceState(y,"",window.location.href)}else a.communication.FFCommunicationEventAggregator.currentSearchResult=m.searchResult}a.communication.ResultDispatcher.dispatch(m,
    b,r(b,f))})}function D(b){b&&a.common.isArray(b)&&b.forEach(function(a){(a=a.pushedProductsRecords)&&a.forEach(function(a,b){a.position=b+1})})}function I(b,f){var m=a.communication.globalCommunicationParameter;if(m.currencyCode&&m.currencyCountryCode){var c=a.communication,g=f.searchResult||f,y=g.fieldRoles||c.fieldRoles;if(y)if("search"===b.type||"filter"===b.type||"sort"===b.type||"ppp"===b.type||"navigation"===b.type||"bct"===b.type)d(g.records,y,m),g.groups.forEach(function(a){e(a,y,m)}),(c=
    g.campaigns)&&c.forEach(function(a){(a=a.pushedProductsRecords)&&d(a,y,m)});else if("suggest"===b.type)(f.suggestions||f).forEach(function(a){var b=a.attributes[y.price];b&&(a.attributes.__ORIG_PRICE__=b,a.attributes[y.price]=k(b,m.currencyCode,m.currencyCountryCode))});else if(b.type&&(-1<b.type.indexOf("recommendation")||"similarProducts"===b.type))try{var h=f.resultRecords||f.records||f;h&&d(h,y,m)}catch(L){console.log(L)}else("productCampaign"===b.type||"pageCampaigns"===b.type)&&f&&f.forEach(function(a){(a=
    a.pushedProductsRecords)&&d(a,y,m)})}}function e(a,f,m){(a.elements[0]||a.selectedElements[0]).associatedFieldName===f.price&&"SLIDER"!==a.filterStyle&&(a.elements.forEach(function(a){a.__ORIG_NAME__=a.name;a.name=k(a.name,m.currencyCode,m.currencyCountryCode)}),a.selectedElements.forEach(function(a){a.__ORIG_NAME__=a.name;a.name=k(a.name,m.currencyCode,m.currencyCountryCode)}))}function d(a,f,m){a.forEach(function(a){var b=a.record[f.price];a.record.__ORIG_PRICE__=b;a.record[f.price]=k(b,m.currencyCode,
    m.currencyCountryCode)})}function k(a,f,m){return parseFloat(a).toLocaleString(m,{style:"currency",currency:f,maximumFractionDigits:2,minimumFractionDigits:2})}function r(a,f){var m=f;a.topics&&"function"==typeof a.topics&&(m=a.topics());return m}var H=String.prototype,M=l(),N=l(),Q=l();H[Q]=function(){return"abcdefghijklmnopqrstuvwxyz"};var h=function(){return function(){this.disableCache=this.generateAdvisorTree=this.useKeywords=this.idsOnly=this.navigation=this.useCampaigns=this.useFoundWords=
    this.useASN=this.articleNumberSearch=this.searchField=this.filter=this.sort=this.productsPerPage=this.page=this.channel=this.query=this.sid=this.version=this.always=this.fail=this.success=this.type=this.url=""}}();c.FFEvent=h;var B=function(a){function f(){a.apply(this,arguments);this.selectedMinValue=this.selectedMaxValue=this.filterName=this.groupName=""}__extends(f,a);return f}(h);c.FilterEvent=B;B=function(a){function f(){a.apply(this,arguments);this.value=""}__extends(f,a);return f}(h);c.BreadCrumbEvent=
    B;B=function(a){function f(){a.apply(this,arguments)}__extends(f,a);return f}(h);c.ProductsPerPageEvent=B;B=function(a){function f(){a.apply(this,arguments)}__extends(f,a);return f}(h);c.PagingEvent=B;B=function(a){function f(){a.apply(this,arguments)}__extends(f,a);return f}(h);c.ProductCampaignEvent=B;B=function(a){function f(){a.apply(this,arguments)}__extends(f,a);return f}(h);c.SuggestEvent=B;B=function(a){function f(){a.apply(this,arguments)}__extends(f,a);return f}(h);c.ProductDetailEvent=
    B;B=function(a){function f(){a.call(this);this.query="*"}__extends(f,a);return f}(h);c.GlobalSearchParameter=B;h=function(){return function(){this.getRecordsUrl=this.similarRecordsUrl=this.compareUrl=this.campaignUrl=this.trackingUrl=this.tagCloudUrl=this.recommendationUrl=this.suggestUrl=this.serachUrl=""}}();c.CustomUrls=h;B=new B;h=new h;c.globalSearchParameter=B;c.globalCustomUrls=h;var R=function(){function a(){}a.query="query";a.channel="channel";a.page="page";a.productsPerPage="productsPerPage";
    a.sort="sort";a.filter="filter";a.searchField="searchField";a.articleNumberSearch="noArticleNumberSearch";a.useASN="useAsn";a.useFoundWords="useFoundWords";a.useCampaigns="useCampaigns";a.navigation="navigation";a.idsOnly="idsOnly";a.useKeywords="useKeywords";a.generateAdvisorTree="generateAdvisorTree";a.disableCache="disableCache";a.sid="sid";return a}(),E=function(){function a(){}a.query="query";a.channel="channel";a.page="page";a.productsPerPage="productsPerPage";a.sort="sort";a.filter="filter";
    a.searchField="searchField";a.articleNumberSearch="noArticleNumberSearch";a.useASN="useAsn";a.useFoundWords="useFoundWords";a.useCampaigns="useCampaigns";a.navigation="navigation";a.idsOnly="idsOnly";a.useKeywords="useKeywords";a.generateAdvisorTree="generateAdvisorTree";a.disableCache="disableCache";a.sid="sid";return a}(),S;(function(b){var f=function(){return function(){this.removeFFPrefix=!0}}();b.RequestBuilderOptions=f;var m=new a.communication.BreadCrumbEvent,c=new a.communication.FilterEvent,
    f=function(){function b(){this.connParamNames=["url","sid"]}b.prototype.buildUrlByParamObject=function(a,b,m){return 6.9==m?this._internalBuildUrl(a,b,R):6.11==m?this._internalBuildUrl(a,b,E):this._internalBuildUrl(a,b,R)};b.prototype.buildUrlByString=function(a,b,m,f){return this._internalBuildUrlString(a,b,f)};b.prototype.buildSearchRequestUrl=function(b){b=a.common.mergeProperties(a.communication.globalSearchParameter,b);this._setCustomUrl(b,a.communication.globalCustomUrls.serachUrl);this._appendAction(b,
        "Search.ff");return this.buildUrlByParamObject(b,b.url,b.version)};b.prototype.buildProductCampaignUrl=function(b){b=a.common.mergeProperties(this._getConnParams(a.communication.globalSearchParameter),b);this._setCustomUrl(b,a.communication.globalCustomUrls.campaignUrl);this._appendAction(b,"ProductCampaign.ff");b["do"]="getProductCampaigns";return this.buildUrlByParamObject(b,b.url,b.version)};b.prototype.buildShoppingCartCampaignUrl=function(b){b=a.common.mergeProperties(this._getConnParams(a.communication.globalSearchParameter),
        b);this._setCustomUrl(b,a.communication.globalCustomUrls.campaignUrl);this._appendAction(b,"ProductCampaign.ff");b["do"]="getShoppingCartCampaigns";return this.buildUrlByParamObject(b,b.url,b.version)};b.prototype.buildPageCampaignUrl=function(b){b=a.common.mergeProperties(this._getConnParams(a.communication.globalSearchParameter),b);this._setCustomUrl(b,a.communication.globalCustomUrls.campaignUrl);this._appendAction(b,"ProductCampaign.ff");b["do"]="getPageCampaigns";return this.buildUrlByParamObject(b,
        b.url,b.version)};b.prototype.buildTagCloudUrl=function(b){b=a.common.mergeProperties(this._getConnParams(a.communication.globalSearchParameter),b);this._setCustomUrl(b,a.communication.globalCustomUrls.tagCloudUrl);this._appendAction(b,"TagCloud.ff");b["do"]="getTagCloud";return this.buildUrlByParamObject(b,b.url,b.version)};b.prototype.buildFilterUrl=function(a,b){return this._buildUrlByFFParamString(b,a)};b.prototype.buildBreadCrumbUrl=function(a,b){return this._buildUrlByFFParamString(b,a)};b.prototype.buildProductsPerPageUrl=
        function(a,b){return this._buildUrlByFFParamString(b,a)};b.prototype.buildPagingUrl=function(a,b){return this._buildUrlByFFParamString(b,a)};b.prototype.buildRecommendationUrl=function(b){b=a.common.mergeProperties(this._getConnParams(a.communication.globalSearchParameter),b);b["do"]="getRecommendation";this._setCustomUrl(b,a.communication.globalCustomUrls.recommendationUrl);this._appendAction(b,"Recommender.ff");return this.buildUrlByParamObject(b,b.url,b.version)};b.prototype.buildSortUrl=function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 b){return this._buildUrlByFFParamString(b,a)};b.prototype.buildSimilarProductsUrl=function(b){b.maxRecordCount=b.maxResults;delete b.maxResults;b=a.common.mergeProperties(a.communication.globalSearchParameter,b);this._setCustomUrl(b,a.communication.globalCustomUrls.similarRecordsUrl);this._appendAction(b,"SimilarRecords.ff");return this.buildUrlByParamObject(b,b.url,b.version)};b.prototype.buildSuggestUrl=function(b){b=a.common.mergeProperties(a.communication.globalSearchParameter,b);this._setCustomUrl(b,
        a.communication.globalCustomUrls.suggestUrl);this._appendAction(b,"Suggest.ff");return this.buildUrlByParamObject(b,b.url,b.version)};b.prototype.buildProductDetailUrl=function(b){b.id||a.common.Logger.debug("No id specified for Product Detail request");b.query=b.id;delete b.id;b.useAsn="false";b.useCampaigns="false";b.isArticleNumber="true";b=a.common.mergeProperties(a.communication.globalSearchParameter,b);this._setCustomUrl(b,a.communication.globalCustomUrls.serachUrl);this._appendAction(b,"Search.ff");
        return this.buildUrlByParamObject(b,b.url,b.version)};b.prototype.buildInitialNavigationRequestUrl=function(b){b=a.common.mergeProperties(a.communication.globalSearchParameter,b);this._setCustomUrl(b,a.communication.globalCustomUrls.serachUrl);this._appendAction(b,"Search.ff");return this.buildUrlByParamObject(b,b.url,b.version)};b.prototype.buildNavigationRequestUrl=function(b,m){b=a.common.mergeProperties(a.communication.globalSearchParameter,b);this._setCustomUrl(b,a.communication.globalCustomUrls.serachUrl);
        this._appendAction(b,"Search.ff");return this.buildUrlByParamObject(b,b.url,b.version)};b.prototype.buildCompareUrl=function(b){b=a.common.mergeProperties(this._getConnParams(a.communication.globalSearchParameter),b);for(var m=b.ids,f="&ids=",c=0;c<m.length;c++)0!=c&&(f+=";"),f+=m[c];delete b.ids;this._setCustomUrl(b,a.communication.globalCustomUrls.compareUrl);this._appendAction(b,"Compare.ff");return this.buildUrlByParamObject(b,b.url,b.version)+f};b.prototype.buildTrackingUrl=function(b){return 6.9==
    (b.version?b.version:b.version=a.communication.globalSearchParameter.version)?this._internalBuildTrackingUrl(b,R):this._internalBuildTrackingUrl(b,E)};b.prototype.buildGetRecordsUrl=function(b){b=a.common.mergeProperties(this._getConnParams(a.communication.globalSearchParameter),b);this._setCustomUrl(b,a.communication.globalCustomUrls.getRecordsUrl);this._appendAction(b,"rest/v1/records/"+b.channel);delete b.channel;return this.buildUrlByParamObject(b,b.url,b.version)};b.prototype._setCustomUrl=function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 b){void 0!=b&&""!=b&&(a.url=b)};b.prototype._appendAction=function(a,b){a.url="/"===a.url[a.url.length-1]?a.url+b:a.url+"/"+b};b.prototype._buildUrlByFFParamString=function(b,m){var f=a.common.getParameterString(b),f=a.common.parameterStringToDict(f);m=a.common.mergeProperties(f,m);m=a.common.mergeProperties(a.communication.globalSearchParameter,m);this._setCustomUrl(m,a.communication.globalCustomUrls.serachUrl);this._appendAction(m,"Search.ff");return this.buildUrlByParamObject(m,m.url,m.version)};
        b.prototype._internalBuildUrl=function(b,f,d){var e="?"===f[f.length-1]?f:f+"?";if(b){b=JSON.parse(JSON.stringify(b));delete b.ff_no_redirect;1==a.communication.globalCommunicationParameter.useSeo&&-1!=f.indexOf("Search.ff")&&delete b.query;for(var g in d)b[g]&&(a.common.isArray(b[g])?e=this._handleArrayParam(g,b[g],e):"function"!==typeof b[g]&&"object"!==typeof b[g]&&(e+=d[g]+"="+b[g]+"&"));if(!0===a.communication.globalCommunicationParameter.appendUnknownParameter)for(g in b)g in m||g in c||(a.common.isArray(b[g])?
            e=this._handleArrayParam(g,b[g],e):"function"!==typeof b[g]&&"object"!==typeof b[g]&&(e+=g+"="+b[g]+"&"));e=e.substring(0,e.length-1)}return e};b.prototype._handleArrayParam=function(a,b,m){for(var f=0;f<b.length;f++){var c=b[f];"function"!==typeof c&&"object"!==typeof c&&(m+=a+"="+c+"&")}return m};b.prototype._internalBuildTrackingUrl=function(b,m){b=a.common.mergeProperties(this._getConnParams(a.communication.globalSearchParameter),b);this._setCustomUrl(b,a.communication.globalCustomUrls.trackingUrl);
            this._appendAction(b,"Tracking.ff");return this._internalBuildUrl(b,b.url,m)};b.prototype._internalBuildUrlString=function(a,b,m){m&&m.removeFFPrefix&&(a="/"!==a[0]?"/"+a:a,a="/"+a.replace(/(\/.*?\/)/,""));return("/"===b[b.length-1]?b.substring(0,b.length-1):b)+a};b.prototype._getConnParams=function(a){var b={};if(a)for(var m=0;m<this.connParamNames.length;m++){var f=this.connParamNames[m];a[f]&&(b[f]=a[f])}return b};return b}();b.FFRequestUrlBuilder=f})(S||(S={}));var W=l(),U=l(),X=l(),v=l(),O=l(),
    T={U2VhcmNoLmZm:!0,"VHJhY2tpbmcuZmY=":!0,cmVzdC92MS9yZWNvcmRz:!0,"cmVzdC92MS9zZWFyY2g=":!0,"cmVzdC92MS90cmFja2luZw==":!0};c.sp=T;(function(b){function f(a){a=decodeURIComponent(a);if(-1==a.lastIndexOf("/q"))return null;a=a.split("/");return a[a.length-2]}b.handleSeoSearch=function(b){if(b.seoPath)b.seoPath=decodeURIComponent(b.seoPath);else{var c=b.query,d;if(a.communication.globalCommunicationParameter.keepFilters){d=b.seoPath?decodeURIComponent(b.seoPath):decodeURIComponent(window.location.pathname).replace(a.communication.globalCommunicationParameter.seoPrefix+
    "","");var e=f(d);c&&"*"!==c&&0!=c.length?d=e?d.replace("/"+e+"/q","/"+c+"/q"):d+"/"+c+"/q":e&&(d=d.replace("/"+e+"/q",""));b.seoPath=encodeURIComponent(d)}else b["ff-seo-initial"]?(delete b["ff-seo-initial"],b.seoPath||(b.seoPath=encodeURIComponent("/"))):b.seoPath=c&&"*"!==c&&0!=c.length?encodeURIComponent("/"+decodeURIComponent(c)+"/q"):encodeURIComponent("/")}};b.pushParameterToHistory=function(b,f,c){var d=a.communication.globalCommunicationParameter,e=!0!==d.useUrlParameter&&!0===d.useBrowserHistory;
    void 0===f&&(f="");if(!(-1<f.indexOf("Suggest.ff")||-1<f.indexOf("Tracking.ff")||!1===d.useUrlParameter&&!1===d.useBrowserHistory)){var g=window.location.href.split("?")[0];if(d.useSeo&&-1!=f.indexOf("Search.ff"))if(!1===e){f=a.common.getParameterString(b.searchResult.searchParams);f=a.common.parameterStringToDict(f);var h="/";void 0!==f.seoPath&&(h=decodeURIComponent(f.seoPath));delete f.seoPath;delete f.query;delete f.format;f=a.common.dictToParameterString(f);history.pushState(b,"",window.location.origin+
        d.seoPrefix+h+f)}else history.pushState(b,"",g);else if(1==d.useFilterURL&&-1!=["search","filter","bct"].lastIndexOf(c)){e=f=a.common.parameterStringToDict(a.common.getParameterString(f));c="";for(h in e)e.hasOwnProperty(h)&&0==h.indexOf("filterCategoryROOT")&&(c+=a.common.fixedDecodeURIComponent(e[h][0])+"/",delete e[h]);h=window.location.origin;d.filterUrlPrefix&&(h+="/"+d.filterUrlPrefix);h=h+("/"+c)+a.common.dictToParameterString(f);history.pushState(b,"",h)}else try{if(!1===e){var k=a.common.getParameterString(f);
        if("ppp"===c||"sort"===c||"paging"===c){var n=a.common.parameterStringToDict(k);delete n.useAsn;delete n.useCampaigns;k=a.common.dictToParameterString(n);k=k.substr(1,k.length)}k=k.replace(/&[fF]{1}[oO]{1}[rR]{1}[mM]{1}[aA]{1}[tT]{1}=[jJ]{1}[sS]{1}[oO]{1}[nN]{1}/g,"");history.pushState(b,"",g+"?"+k)}else history.pushState(b,"",g)}catch(l){a.common.Logger.error("Result is too big for history")}}};b.changeRecordPropertyName=function(a,b){if(a)for(var f=0;f<a.length;f++){var c=a[f].record,d;for(d in b){var e=
    b[d];e!==d&&c[d]&&(c[e]=c[d],delete c[d])}}};b.getQueryFromSearchParams=function(){try{var b=a.common.parameterStringToDict(a.communication.FFCommunicationEventAggregator.currentSearchResult.searchParams.split("?")[1]),c="";b.query&&(c=a.common.fixedDecodeURIComponent(b.query[0]));if(!0===a.communication.globalCommunicationParameter.useSeo){var d=a.common.fixedDecodeURIComponent(f(b.seoPath));d||c||a.common.Logger.debug("whether seoPath param is set nor query param. Maybe FACT-Finder SEO is not active ");
    return d?d:c}return c}catch(e){return""}};b.addRenameRecordFields=function(b){var f=a.communication.ResultDispatcher.addCallback("productCampaign",function(a){if(a)for(var f=0;f<a.length;f++){var c=a[f];c.pushedProductsRecords&&this.changeRecordPropertyName(c.pushedProductsRecords,b)}},this),c=a.communication.ResultDispatcher.addCallback("result",function(a){var f=a.records;try{this.changeRecordPropertyName(f,b)}catch(c){console.log(c)}try{if(a.campaigns)for(var d in a.campaigns){var e=a.campaigns[d];
    e.pushedProductsRecords&&this.changeRecordPropertyName(e.pushedProductsRecords,b)}}catch(c){console.log(c)}if(a.singleWordResults)for(a=a.singleWordResults,f=0;f<a.length;f++)if(d=a[f],d.previewRecords)try{this.changeRecordPropertyName(d.previewRecords,b)}catch(c){console.log(c)}},this),d=a.communication.ResultDispatcher.addCallback("recommendation",function(a){this.changeRecordPropertyName(a,b)},this),e=a.communication.ResultDispatcher.addCallback("similarProducts",function(a){this.changeRecordPropertyName(a,
    b)},this);return{productCampaign:f,result:c,recommendation:d,similarProducts:e}};b.removeRenameRecordFields=function(b){for(var f in b)!0!==a.communication.ResultDispatcher.unsubscribe(f,b[f])&&a.common.Logger.debug("Could not remove renameRecordField callback for topic ["+f+"] with key")};b.trackingHelper={getTrackingProductId:function(b){var f=a.communication;return f.fieldRoles&&f.fieldRoles.trackingProductNumber?b.record[f.fieldRoles.trackingProductNumber]:b.id},getPrice:function(b){var f=a.communication.fieldRoles;
        return f&&f.price?b.record.__ORIG_PRICE__||b.record[f.price]:""},getTitle:function(b){var f=a.communication.fieldRoles;return f&&f.productName?b.record[f.productName]:""},getMasterArticleNumber:function(b){var f=a.communication.fieldRoles;return f&&f.masterArticleNumber?b.record[f.masterArticleNumber]:""},getUserId:function(){var b=a.communication.globalCommunicationParameter;if(b.userId)return b.userId},getCampaignProductNumber:function(b){var f=a.communication;return f.fieldRoles&&f.fieldRoles.campaignProductNumber?
        b.record[f.fieldRoles.campaignProductNumber]:b.id}}})(c.Util||(c.Util={}));h=function(){return function(){this.useBrowserHistory=this.useUrlParameter=this.ajax=!0;this.useCache=!1;this.appendUnknownParameter=!0;this.keepFilters=this.isSessionIdDisabled=!1;this.useAsn=!0;this.useFoundWords=!1;this.useCampaigns=!0;this.disableCache=this.generateAdvisorTree=!1;this.useAso=this.useSemanticEnhancer=this.usePersonalization=!0;this.useSeo=!1;this.currencyCode=this.currencyCountryCode=this.sid=this.seoPrefix=
    "";this.useFilterURL=this.singleHitRedirect=!1;this.filterUrlPrefix=""}}();c.GlobalCommunicationParameter=h;c.globalCommunicationParameter=new h;var P=l(),N=l(),u=l(),F=l(),q=l();H[q]=function(){var a=0,f,c,d;if(0===this.length)return a;f=0;for(d=this.length;f<d;f++)c=this.charCodeAt(f),a=(a<<5)-a+c,a|=0;return a};H[P]=function(){var a="";""[U]();for(var f=a.concat(this[W](),this[Q](),""[U]()),c=0;c<f.length;c++)a+=f.charAt(Math.floor(Math.random()*f.length));return a};h=function(){return function(){this.currentFFSearchBoxValue=
    ""}}();c.GlobalElementValues=h;h=new h;c.globalElementValues=h;H[X]=function(){return Math.random()};H[v]=function(){return(new Date).getTime()};H[O]=function(){return this[q]()};H[U]=function(){return"0123456789"};(function(b){function f(b,f,c){try{var d=E[b];if(d)for(b=0;b<d.length;b++){var m=d[b];try{m.fn.call(m.ctx,f,void 0,c)}catch(e){a.common.Logger.error("could not invoke callback function  "+m+" :"+e)}}}catch(e){}}function c(a,b,f){try{var d=C[a];if(d)for(var d=d.slice(),m=0;m<d.length;m++)try{var e=
    d[m];e.fn.call(e.ctx,b,void 0,f)}catch(g){z.error("could not invoke subscriber function ["+d[m].name+"] for topic ["+a+"]. error: "+g)}}catch(g){}}function d(a,b){try{f(b,a)}catch(e){}try{z.debug("dispatching topic: "+b),c(b,a)}catch(e){}}function e(a){g(a);v(a);h(a);k(a);n(a);l(a);p(a);t(a);q(a);r(a);I(a)}function g(a){f("result",a);z.debug("dispatching result");c("result",a)}function h(a){f("records",a.records);z.debug("dispatching records");c("records",a.records)}function k(a){f("bct",a.breadCrumbTrailItems);
    z.debug("dispatching bread crumb trail");c("bct",a.breadCrumbTrailItems)}function n(a){f("sort",a.sortsList);z.debug("dispatching sort items");c("sort",a.sortsList)}function l(a){f("ppp",a.resultsPerPageList);z.debug("dispatching results per page items");c("ppp",a.resultsPerPageList)}function p(a){f("paging",a.paging);z.debug("dispatching paging");c("paging",a.paging)}function t(a){a=a&&a.paging?a.paging:void 0;f("pagingItems",a);z.debug("dispatching paging items");c("pagingItems",a)}function q(a){f("asn",
    a.groups);z.debug("dispatching asn");c("asn",a.groups)}function r(a){f("singleWordSearch",a.singleWordResults);z.debug("dispatching singleWordSearch");c("singleWordSearch",a.singleWordResults)}function u(a){var b;a&&a.records instanceof Array&&(b=a.records[0]);f("productDetail",b);z.debug("dispatching productDetail");c("productDetail",b)}function v(a){f("campaign",a.campaigns);z.debug("dispatching campaigns");x(a.campaigns,"campaign")}function K(a){f("pageCampaigns",a);z.debug("dispatching page campaigns");
    x(a,"campaign")}function w(a){f("productCampaign",a);z.debug("dispatching productCampaign");x(a,"productCampaign")}function J(a){f("shoppingCartCampaign",a);z.debug("dispatching shoppingCartCampaign");x(a,"shoppingCartCampaign")}function x(b,f){try{var d=[];d.push(f);for(var e=0;e<b.length;e++){var g=b[e];g.pushedProductsRecords&&0<g.pushedProductsRecords.length&&(d.push(f+":pushedProducts"),d.push(f+":pushedProducts:"+g.name));d.push(f+":"+g.name);d.push(f+":"+g.flavour.toLowerCase());d.push(f+":"+
    g.flavour.toLowerCase()+":"+g.name);g.feedbackTexts&&(d.push(f+":feedbacktext"),g.feedbackTexts.forEach(function(a){d.push(f+":feedbacktext:"+g.name);d.push(f+":feedbacktext:"+a.label)}))}for(var h=a.common.getKeyByPattern(C,new RegExp(f)).filter(function(a){return-1==d.indexOf(a)}),e=0;e<h.length;e++)c(h[e],void 0);for(e=0;e<b.length;e++){var k=b[e];try{k.pushedProductsRecords&&0<k.pushedProductsRecords.length&&(c(f+":pushedProducts",k.pushedProductsRecords),c(f+":pushedProducts:"+k.name,k.pushedProductsRecords))}catch(n){}c(f,
    k);c(f+":"+k.name,k);c(f+":"+k.flavour.toLowerCase(),k);c(f+":"+k.flavour.toLowerCase()+":"+k.name,k);var l=k.feedbackTexts;if(l)for(h=0;h<l.length;h++){var L=l[h];c(f+":feedbacktext",L);c(f+":feedbacktext:"+k.name,L);c(f+":feedbacktext:"+L.label,L)}}}catch(n){}}function A(a,b){f("suggest",a,b);z.debug("dispatching suggest");c("suggest",a,b)}function B(a,b){f("recommendation",a);z.debug("dispatching recommendations");c("recommendation",a);c(b.type,a)}function D(a){f("similarProducts",a);z.debug("dispatching similarProducts");
    c("similarProducts",a)}function F(a,b){f("compare",a);z.debug("dispatching compare");c("compare",a);c(b.type,a)}function G(a){f("tagCloud",a);z.debug("dispatching tag cloud items");c("tagCloud",a)}function I(b){if(b&&b.searchParams)try{var d=b.searchParams.split("?")[1],e=a.common.parameterStringToDict(d).query;if(e){try{f("query",e)}catch(g){}try{z.debug("dispatching query"),c("query",e)}catch(g){}}}catch(g){z.debug("result.searchParams from query has no params")}}function H(b){f("navigation",b);
    try{var d=a.communication.FFCommunicationEventAggregator;b.searchResult.groups[0].elements.forEach(function(a){var b=d.navigationResult[a.associatedFieldName];d.navigationResult[a.associatedFieldName+"/"+a.name]={element:a,subelements:[]};d.navigationLayer[a.clusterLevel]||(d.navigationLayer[a.clusterLevel]=[]);d.navigationLayer[a.clusterLevel].push(a);b&&b.subelements.push(a)});setTimeout(function(){c("navigation",d.navigationLayer[0])},0)}catch(e){console.warn("dispatchNavigation",e)}}var z=a.common.Logger,
    C={},E={},M={result:g,records:h,asn:q,sort:n,paging:p,suggest:A,bct:k,ppp:l,pagingItems:t,productDetail:u,singleWordSearch:r,query:I,campaign:v,productCampaign:w,shoppingCartCampaign:J,pageCampaigns:K,navigation:H,tagCloud:G,similarProducts:D};b.invokeCallbacks=f;b.addCallback=function(b,f,c){E[b.toLowerCase()]||(E[b.toLowerCase()]=[]);if(E[b.toLowerCase()]){var d=a.common.randomString(20);E[b.toLowerCase()].push({fn:f,ctx:c,key:d});return d}a.common.Logger.error("Cant add callback for topic ["+b+
    "]. Topic does not exist.")};b.removeCallback=function(b,f){E[b.toLowerCase()]||(E[b.toLowerCase()]=[]);var c=E[b.toLowerCase()];if(c)for(var d=0;d<c.length;d++){if(c[d].key===f)return c.splice(d,1),!0}else a.common.Logger.error("Cant add callback for topic ["+b+"]. Topic does not exist.")};b.subscribe=function(b,f,c){try{if(C[b]||(C[b]=[]),C[b]){var d=a.common.randomString(20);C[b].push({fn:f,ctx:c,key:d});return d}}catch(m){return z.error("unexpected error. could not subscribe: "+m),null}};b.unsubscribe=
    function(a,b){try{var f=C[a],c;for(c in f)if(f[c].key===b)return f.splice(c,1),!0}catch(d){return z.error("unexpected error. could not unsubscribe: "+d),!1}};b.dispatch=function(a,b,f){a?f?(f instanceof Array?z.debug("dispatch topics: "+f):f=[f],f.forEach(function(f){if("recommendation"==f)B(a.resultRecords?a.resultRecords:a,b);else if("compare"==f)F(a,b);else if("suggest"==f)A(a.suggestions?a.suggestions:a,b);else if(M[f])M[f](a.searchResult||a);else d(a,f)})):e(a.searchResult||a):z.error("No response to dispatch for topics: "+
    f)};b.dispatchResultByTopic=d;b.dispatchSearchResult=function(a){e(a)};b.dispatchResult=e;b.dispatchResultInternal=g;b.dispatchRecords=h;b.dispatchBreadcrumbTrail=k;b.dispatchSorting=n;b.dispatchProductsPerPage=l;b.dispatchPaging=p;b.dispatchPagingItems=t;b.dispatchAsn=q;b.dispatchSingleWordSearch=r;b.dispatchProductDetail=u;b.dispatchCampaigns=v;b.dispatchPageCampaigns=K;b.dispatchProductCampaigns=w;b.dispatchShoppingCartCampaign=J;b._doCampaingDispatch=x;b.dispatchSuggest=A;b.dispatchRecommendations=
    B;b.dispatchSimilarProducts=D;b.dispatchCompare=F;b.dispatchTagCloud=G;b.dispatchQuery=I;b.dispatchNavigationFrame=H})(c.ResultDispatcher||(c.ResultDispatcher={}));var x=window.btoa(window.location.origin),h=l();a.common.localStorage.setItem(x,h);H[W]=function(){return"ABCDEFGHIJKLMNOPQRSTUVWXYZ"};var G=function(b){function f(f,c,d){b.call(this,f,!1);this._isPushParameterToHistory=!1;if(!/[fF]{1}[oO]{1}[rR]{1}[mM]{1}[aA]{1}[tT]{1}=[jJ]{1}[sS]{1}[oO]{1}[nN]{1}/.test(f)){var e=a.common.urlStringToDict(f);
    e.format="json";f=f.split("?")[0]+a.common.dictToParameterString(e)}this._i(f);for(var e=[],g=f[M](a.communication.sessionManager).split("$"),h=0;3>h;h++){for(var k=10*h,n="",l=k;l<k+10;l++)n+=g[l];e.push(n)}h=f[X]();w(e[0],h,1,this,f);k=f[P]();w(e[1],k,1,this,f);g=f[v]();h=f[F](+h,g,f[O](),k);w(e[2],f[N](h),1,this,f);w(e[1],h[3],1,this,f);w("_ffo",a.common.localStorage.getItem(x).substring(0,0)+x,1,this,f);e=g%99;50<=e?(g+="",h=g.slice(2,g.length),g=g[0]+g[1]):(g+="",h=g.slice(g.length-2,g.length),
    g=g.slice(0,g.length-2));10>e&&(e="0"+e);w("_fft",h+g+e,1,this,f);this._isPushParameterToHistory=c;this._ffEventType=d}__extends(f,b);f.prototype.s=function(b){this._sC=function(f,c,d){var e;try{-1<d.getResponseHeader("content-type").toLowerCase().indexOf("application/json")&&(e=JSON.parse(f)),!0===this._isPushParameterToHistory&&a.communication.Util.pushParameterToHistory(e,this._u,this._ffEventType)}catch(g){a.common.Logger.error("Could not parse response. Probably authentication failed: "+g);this._iFC(c);
    return}try{b(e)}catch(g){a.common.Logger.error(g)}return e};return this};return f}(function(){function b(a,b){void 0===b&&(b=!0);!0===b&&this._i(a);this._u=a}b.prototype._i=function(a){var b=new XMLHttpRequest;"withCredentials"in b?(b.open("GET",a,!0),b.setRequestHeader("Accept","application/json")):"undefined"!=typeof XDomainRequest?(b=new XDomainRequest,b.open("GET",a,!0)):b=null;this._r=b;if(!this._r)throw Error("CORS is not supported");};b.prototype.f=function(a){this._fC=a;return this};b.prototype.s=
    function(a){this._sC=a;return this};b.prototype.a=function(a){this._aC=a;return this};b.prototype._iSC=function(b){if(this._sC&&200===b.target.status){try{this._sC(this._r.responseText,b,this._r)}catch(c){a.common.Logger.error(c)}if(this._aC)try{this._aC(b)}catch(c){a.common.Logger.error(c)}}else this._iFC(b)};b.prototype._iFC=function(b){if(this._fC)try{this._fC(this._r.responseText,b)}catch(c){a.common.Logger.error(c)}if(this._aC)try{this._aC(this._r.responseText,b)}catch(c){a.common.Logger.error(c)}};
    b.prototype.se=function(){void 0!==this._r&&null!==this._r||void 0===this._u||this._i(this._u);this._r.onload=this._iSC.bind(this);this._r.onerror=this._iFC.bind(this);this._r.send()};return b}());H[F]=function(a,f,c,d){d=[[],[],[]];for(var e=2;e<this.length;e++){var g=e;d[0][e-2]=a.toString().charAt(e);d[0][e-2]&&g--;d[1][e-2]=f.toString().charAt(f.toString().length-2-e);d[1][e-2]&&g--;d[2][e-2]=c.toString().charAt(e);d[2][e-2]&&g--;if(1==g)break}return this[u](d)};h=function(){function b(){this.LOCALSTORAGE_SID_PARAM_NAME=
    "ff_sid";this.REQUEST_SID_PARAM_NAME="sid";this.SESSION_ID_LENGTH=30}b.prototype.checkSession=function(b){if(!0!==a.communication.globalCommunicationParameter.isSessionIdDisabled){var c=a.common.localStorage,d=a.communication.globalCommunicationParameter.sid,e=this.readSessionIdFromLocalstorage(),g=this.readSessionIdFromRequestParams();d?(b.sid=d,e!==d&&c.setItem(this.LOCALSTORAGE_SID_PARAM_NAME,d)):(e?this.writeSessionIdToUrl(e):g?(a.common.isArray(g)&&(g=g[0]),c.setItem(this.LOCALSTORAGE_SID_PARAM_NAME,
    g)):(c=this.readSessionIdFromLocalstorage(!0),this.writeSessionIdToUrl(c)),b.sid=this.readSessionIdFromLocalstorage())}};b.prototype.readSessionIdFromLocalstorage=function(b){if(!0!==a.communication.globalCommunicationParameter.isSessionIdDisabled){var c=a.common.localStorage;c.getItem(this.LOCALSTORAGE_SID_PARAM_NAME)||!0!==b||c.setItem(this.LOCALSTORAGE_SID_PARAM_NAME,a.common.randomString(this.SESSION_ID_LENGTH));return c.getItem(this.LOCALSTORAGE_SID_PARAM_NAME)}};b.prototype.writeSessionIdToUrl=
    function(b){var c=a.communication.globalCommunicationParameter;!0!==c.isSessionIdDisabled&&!0===c.useUrlParameter&&(c=this.readSessionIdFromRequestParams(!1),c&&void 0!==c[0]&&c[0]===b||(b?(a.common.localStorage.setItem(b),a.common.setUrlParameter(this.REQUEST_SID_PARAM_NAME,b)):c||(b=this.readSessionIdFromLocalstorage(!0),a.common.setUrlParameter(this.REQUEST_SID_PARAM_NAME,b))))};b.prototype.readSessionIdFromRequestParams=function(b){var c=a.common.urlStringToDict()[this.REQUEST_SID_PARAM_NAME];
    c||!0!==b||(c=this.readSessionIdFromLocalstorage(!0),this.writeSessionIdToUrl(c));return c};return b}();c.SessionManager=h;h=new h;c.sessionManager=h;h=function(){function b(){this.requestBuilder=new S.FFRequestUrlBuilder;this.sessionManager=a.communication.sessionManager;this.neededClickInfo="id sid query pos origPos page origPageSize".split(" ");this.neededCartInfo=["id","sid","count"];this.neededCheckoutInfo=["id","sid","count"];this.neededRecoInfo=["id","sid","mainId"];this.neededLoginInfo=["userId",
    "sid"];this.neededSearchFeedbackInfo=["id","sid","query","positive"]}b.prototype.click=function(a){this.sessionManager.checkSession(a);!0===this.checkNeededParamsAvailable(this.neededClickInfo,a)&&(a.event="click",this._sendRequest(a))};b.prototype.cart=function(a){this.sessionManager.checkSession(a);!0===this.checkNeededParamsAvailable(this.neededCartInfo,a)&&(a.event="cart",this._sendRequest(a))};b.prototype.checkout=function(a){this.sessionManager.checkSession(a);!0===this.checkNeededParamsAvailable(this.neededCheckoutInfo,
    a)&&(a.event="checkout",this._sendRequest(a))};b.prototype.login=function(a){this.sessionManager.checkSession(a);!0===this.checkNeededParamsAvailable(this.neededLoginInfo,a)&&(a.event="login",this._sendRequest(a))};b.prototype.recommendationClick=function(a){this.sessionManager.checkSession(a);!0===this.checkNeededParamsAvailable(this.neededRecoInfo,a)&&(a.event="recommendationClick",this._sendRequest(a))};b.prototype.searchFeedback=function(a){this.sessionManager.checkSession(a);!0===this.checkNeededParamsAvailable(this.neededSearchFeedbackInfo,
    a)&&(a.event="feedback",this._sendRequest(a))};b.prototype.checkNeededParamsAvailable=function(a,b){for(var c=0;c<a.length;c++)if(!b.hasOwnProperty(a[c]))return!1;return!0};b.prototype._sendRequest=function(b){if(!b.channel){var c=a.common.getParameterString();c&&(c=a.common.parameterStringToDict(c),c.channel&&(b.channel=c.channel,a.communication.globalSearchParameter.channel=b.channel));b.channel||(b.channel=a.communication.globalSearchParameter.channel)}if(c=a.communication.globalCommunicationParameter.addTrackingParams)try{for(var d=
    c.trim().split(","),c=0;c<d.length;c++){var e=d[c];try{var g=e.split("="),h=g[0].trim(),k=g[1].trim();b[h]=k}catch(n){}}}catch(n){}d=this.requestBuilder.buildTrackingUrl(a.common.encodeDict(b));b.success||(b.success=function(){});(new G(d,!1)).s(b.success).f(b.fail).a(b.always).se()};return b}();c.Tracking12=h;h=new h;c.trackingManager=h;H[N]=function(a){return a[0].concat(a[1]).concat(a[2])};var C=a.common.Logger,A=new S.FFRequestUrlBuilder,h={};h.search=t;h.filter=function(b){if(a.communication.FFCommunicationEventAggregator.currentSearchResult&&
    a.communication.FFCommunicationEventAggregator.currentSearchResult.groups){g(b);var c=a.common.urlStringToDict(a.communication.FFCommunicationEventAggregator.currentSearchResult.searchParams),d;for(d in c)c.hasOwnProperty(d)&&-1<d.indexOf("sort")&&(b[d]=c[d]);c.productsPerPage&&(b.productsPerPage=c.productsPerPage);for(var e=decodeURIComponent(b.groupName),h=0;h<a.communication.FFCommunicationEventAggregator.currentSearchResult.groups.length;h++)if(d=a.communication.FFCommunicationEventAggregator.currentSearchResult.groups[h],
e==d.name){if(b.removeAll){delete b.removeAll;e=function(b){if(k)for(var d in c)c.hasOwnProperty(d)&&0===d.indexOf("filterCategoryROOT")&&delete c[d];else b=a.common.fixedEncodeURIComponent(b.associatedFieldName),delete c["filter"+b]};if("slider"===d.filterStyle.toLowerCase())d.elements.forEach(e);else{if("tree"===d.filterStyle.toLowerCase())var k=!0;d.selectedElements.forEach(e)}d=A.buildFilterUrl(b,a.common.dictToParameterString(c));n(d,b,!0);return}var l=decodeURIComponent(b.filterName),L=b.clusterLevel;
    delete b.clusterLevel;for(var p=0;p<d.selectedElements.length;p++){var t=d.selectedElements[p];if(t.name==l&&t.clusterLevel==L){d=A.buildFilterUrl(b,t.searchParams);n(d,b,!0);return}}for(p=0;p<d.elements.length;p++)if(t=d.elements[p],t.name==l&&(void 0===L||t.clusterLevel==L)){d=A.buildFilterUrl(b,t.searchParams);n(d,b,!0);return}}C.log("filter ["+b.filterName+"] in group ["+e+"] not found.")}else C.log("discard filter event. no result available, you need to search before you can filter the result.")};
    h.clearFilter=function(b){if("true"===b.removeParams)a.communication.FFCommunicationEventAggregator.addFFEvent({type:"search",query:a.communication.Util.getQueryFromSearchParams()});else{var c=a.common.urlStringToDict(a.communication.FFCommunicationEventAggregator.currentSearchResult.searchParams),d;for(d in c)c.hasOwnProperty(d)&&"filter"===d.substr(0,6)&&delete c[d];b.type="search";delete b.removeParams;g(b);c=A._buildUrlByFFParamString(a.common.dictToParameterString(c),b);n(c,b,!0)}};h.bct=function(b){if(a.communication.FFCommunicationEventAggregator.currentSearchResult&&
        a.communication.FFCommunicationEventAggregator.currentSearchResult.breadCrumbTrailItems){for(var c=0;c<a.communication.FFCommunicationEventAggregator.currentSearchResult.breadCrumbTrailItems.length;c++){var d=a.communication.FFCommunicationEventAggregator.currentSearchResult.breadCrumbTrailItems[c];if(decodeURIComponent(b.value)===d.value){g(b);n(A.buildBreadCrumbUrl(b,d.searchParams),b,!0);return}}C.log("no bread crumb trail item found for value: "+b.value)}else C.log("discard breadCrumbTrail event. no result available, you need to search before you can use the bct.")};
    h.sort=function(b){if(a.communication.FFCommunicationEventAggregator.currentSearchResult&&a.communication.FFCommunicationEventAggregator.currentSearchResult.sortsList){for(var c=0;c<a.communication.FFCommunicationEventAggregator.currentSearchResult.sortsList.length;c++){var d=a.communication.FFCommunicationEventAggregator.currentSearchResult.sortsList[c];if(decodeURIComponent(b.value)===d.description){b.useAsn="false";b.useCampaigns="false";g(b,"records sort paging ppp pagingItems campaign singleWordSearch result".split(" "));
        n(A.buildSortUrl(b,d.searchParams),b,!0);return}}C.log("no sort item found for value: "+b.value)}else C.log("discard sort event. no result available, you need to search before you can sort the result.")};h.ppp=function(b){if(a.communication.FFCommunicationEventAggregator.currentSearchResult&&a.communication.FFCommunicationEventAggregator.currentSearchResult.resultsPerPageList){for(var c=0;c<a.communication.FFCommunicationEventAggregator.currentSearchResult.resultsPerPageList.length;c++){var d=a.communication.FFCommunicationEventAggregator.currentSearchResult.resultsPerPageList[c];
        if(b.value===d.value){b.useAsn="false";b.useCampaigns="false";g(b,"records paging ppp pagingItems campaign singleWordSearch result".split(" "));n(A.buildProductsPerPageUrl(b,d.searchParams),b,!0);return}}C.log("no products per page item found for value: "+b.value)}else C.log("discard products per page event. no result available, you need to search before you can use products per page.")};h.paging=function(b){if(a.communication.FFCommunicationEventAggregator.currentSearchResult&&a.communication.FFCommunicationEventAggregator.currentSearchResult.paging){var c=
        function(a,b){return a&&a.number===b.number},d=a.communication.FFCommunicationEventAggregator.currentSearchResult.paging,e;c(d.firstLink,b)?e=d.firstLink:c(d.lastLink,b)?e=d.lastLink:c(d.previousLink,b)?e=d.previousLink:c(d.nextLink,b)&&(e=d.nextLink);if(!e){var h=function(a){c(a,b)&&(e=a)};d.pageLinks&&d.pageLinks.forEach(h)}e?(b.useAsn="false",b.useCampaigns="false",delete b.number,g(b,"records paging ppp pagingItems campaign singleWordSearch result".split(" ")),n(A.buildPagingUrl(b,e.searchParams),
        b,!0)):C.log("no paging item found for value: "+b.number)}};h.suggest=function(a){g(a,["suggest"]);var c=a.url?a.url:A.buildSuggestUrl(a);n(c,a,!1)};h.suggestItem=function(b){var c=A.buildUrlByString(b["ff-suggestParams"],a.communication.globalSearchParameter.url,a.communication.globalSearchParameter.version,{removeFFPrefix:!0});delete b["ff-suggestParams"];b.type="search";b.url=c;t(b)};h.productDetail=function(a){g(a,["productDetail"]);var c=a.url?a.url:A.buildProductDetailUrl(a);n(c,a,!1)};h.tagCloud=
        function(a){g(a,["tagCloud"]);n(A.buildTagCloudUrl(a),a,!1)};h.navigation=function(b){a.communication.FFCommunicationEventAggregator.navigationResult={};a.communication.FFCommunicationEventAggregator.navigationLayer={};var c=Number(b.firstFetch);0>c&&(c=0);var d=Number(b.fetchSize);0>d&&(d=1);var e=Number(b.maxFetch);10<e&&(e=10);b=Number(b.fetchTime);0>b&&(b=100);J(0,c,e,d,b)};h["navigation-search"]=function(a){a.type="search";a.navigation="true";var c=[],d;for(d in a)0===d.indexOf("filter")&&(c.push({key:d,
        value:a[d]}),a[d]=decodeURIComponent(a[d]));g(a);c=a.url?a.url:A.buildNavigationRequestUrl(a,c);n(c,a,!0)};h.similarProducts=function(a){g(a,["similarProducts"]);n(A.buildSimilarProductsUrl(a),a,!1)};h.advisor=function(b){var c=a.common.getParameterString(b.answer.params),c=a.common.parameterStringToDict(c);b=a.common.mergeProperties(b,c);delete b.answer;delete b.type;t(b)};h.productCampaign=function(a){g(a,["productCampaign"]);n(A.buildProductCampaignUrl(a),a,!1)};h.shoppingCartCampaign=function(a){g(a,
        ["shoppingCartCampaign"]);n(A.buildShoppingCartCampaignUrl(a),a,!1)};h.pageCampaigns=function(a){g(a,["pageCampaigns"]);n(A.buildPageCampaignUrl(a),a,!1)};h.recommendation=function(a){g(a,["recommendation"]);n(A.buildRecommendationUrl(a),a,!1)};h.compare=function(b){a.common.isArray(b.ids)?2>b.ids.length?console.warn("Not at least 2 ids in this compare event",b):(g(b,["compare"]),n(A.buildCompareUrl(b),b,!1)):console.warn("No ids in this compare event",b)};h.getRecords=function(a){g(a,["getRecords"]);
        n(A.buildGetRecordsUrl(a),a,!1)};c.eventFunctions=h;h=function(){function a(){}a.prototype.addFFEvent=function(a){if(a.type)if(-1<a.type.indexOf("recommendation"))c.eventFunctions.recommendation(a);else if(-1<a.type.indexOf("compare"))c.eventFunctions.compare(a);else if(void 0!=c.eventFunctions[a.type])c.eventFunctions[a.type](a);else C.log("event could not be dispatched. no valid type specified - type ["+a.type+"]");else C.log("event could not be dispatched. no type specified")};return a}();c.FFCommunicationHandler=
        h;h=function(a){function c(){a.apply(this,arguments)}__extends(c,a);return c}(a.communication.FFCommunicationHandler);c.FF611CommunicationHandler=h;H[M]=function(a){var c={};a.checkSession(c);a=[];for(var d=0;d<c.sid.length;d++)a.push(c.sid.charCodeAt(d).toString(16));return a.join("$")};h=function(a){function c(){a.apply(this,arguments)}__extends(c,a);return c}(a.communication.FFCommunicationHandler);c.FF70CommunicationHandler=h;h=function(a){function c(){a.apply(this,arguments)}__extends(c,a);return c}(a.communication.FFCommunicationHandler);
    c.FF71CommunicationHandler=h;H[u]=function(a){for(var c=this[P](),d=[],e=0;3>e;e++){var g="";a[e].forEach(function(a){for(var b=0;6>b;b++)g+=c.charAt(+a+10*b)});d.push(g)}d.push(c);return d};(function(b){var c=new a.communication.FF611CommunicationHandler,d=new a.communication.FF70CommunicationHandler,e=new a.communication.FF71CommunicationHandler,g=a.common.Logger,h=[],k=[];b.navigationResult={};b.navigationLayer={};b.addFFEvent=function(b){if(!b.version)try{b.version=parseFloat(a.communication.globalSearchParameter.version)}catch(n){this.logger.error(n)}if(!b.channel){var l=
        a.common.getParameterString();l&&(l=a.common.parameterStringToDict(l),l.channel&&(b.channel=l.channel,a.communication.globalSearchParameter.channel=b.channel));b.channel||(b.channel=a.communication.globalSearchParameter.channel)}for(l=0;l<h.length;l++){var p=h[l];b.fail=b.fail?a.common.concatFunctions(b.fail,p.fn):p.fn}a.communication.sessionManager.checkSession(b);l=b.type;a.common.encodeDict(b);b.type=l;for(var t in b){l=b[t];try{a.common.isArray(l)&&1===l.length&&(b[t]=l[0])}catch(n){}}for(l=0;l<
    k.length;l++){p=k[l];try{p.fn(b)}catch(n){console.log("Could not execute beforeDispatchingCallback: "+n)}}b.query&&(b.query=a.common.fixedDecodeURIComponent(b.query).replace(/<.*>/g,""),b.query=a.common.fixedEncodeURIComponent(b.query));6.9==b.version||b[0]&&6.9==b[0]?(g.debug("dispatch event to FF6.9 component."),c.addFFEvent(b)):6.11==b.version||b[0]&&6.11==b[0]?(g.debug("dispatch event to FF6.11 component."),c.addFFEvent(b)):7==b.version||b[0]&&7==b[0]?(g.debug("dispatch event to FF7.0 component."),
        d.addFFEvent(b)):(7.1==b.version||b[0]&&7.1==b[0]?g.debug("dispatch event to FF7.1 component."):7.2==b.version||b[0]&&7.2==b[0]?g.debug("dispatch event to FF7.2 component."):7.3==b.version||b[0]&&7.3==b[0]?g.debug("dispatch event to FF7.3 component."):g.debug("default to 7.2 component."),e.addFFEvent(b))};b.removeFailCallback=function(a){for(var b=0;b<h.length;b++)if(h[b].key===a)return h.splice(b,1),!0;return!1};b.addFailCallback=function(b){if(b){var c=a.common.randomString(20);h.push({fn:b,key:c});
        return c}a.common.Logger.debug("addFailCallback: fn is undefined")};b.removeBeforeDispatchingCallback=function(a){for(var b=0;b<k.length;b++)if(k[b].key===a)return k.splice(b,1),!0;return!1};b.addBeforeDispatchingCallback=function(b){if(b){var c=a.common.randomString(20);k.push({fn:b,key:c});return c}a.common.Logger.debug("addBeforeDispatchingCallback: fn is undefined")};b.getCurrentResult=function(a){return b.currentSearchResult}})(c.FFCommunicationEventAggregator||(c.FFCommunicationEventAggregator=
        {}))})(a.communication||(a.communication={}))})(factfinder||(factfinder={}));
(function(a){(function(c){var l=function(){return function(){this.returnAsString=this.append=!0}}();c.RendererOptions=l;l=function(){function c(){this.renderer=a.libs.mustache}c.prototype.render=function(a,c,l,n){if(a.childNodes){var p=document.createElement("div");p.appendChild(a);a=p.innerHTML}try{var g=this.renderer.render(a,c)}catch(w){return console.error?console.error("could not render template: "+a,w):console.log("could not render template: "+a,w),""}if(l&&l.childNodes)for(a=document.createElement("div"),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         a.innerHTML=g,c=0;c<a.childNodes.length;c++)if(p=a.childNodes[c],!n||n&&1==n.append)l.appendChild(p);else{var D=l.firstChild;D&&l.insertBefore(p,D)}return n&&!1===n.returnAsString?(l=document.createElement("div"),l.innerHTML=g,l.isWrapper=!0,l.firstElementChild):g};return c}();c.TemplateRenderer=l})(a.html||(a.html={}))})(factfinder||(factfinder={}));
(function(a){(function(c){var l=function(){function c(){this.templateRenderer=new a.html.TemplateRenderer}c.prototype.processAsnElement=function(c,l,w,n,p){w={group:w,element:l};var g;c instanceof Array?g=l.selected?c[0]:c[1]:c instanceof HTMLElement?g=c:c instanceof Object?g=l.selected?c.selected:c.unselected:a.common.Logger.error("Could not read templates. Parameter[templates] needs to be an array OR an object with selected/unselected properties.");return this.templateRenderer.render(g,w,n,p)};
    c.prototype.processDetailedLinks=function(a,c,l,n){l||(l=document.createElement("div"),l.isWrapper=!0);for(var p=0;p<c.detailedLinks&&p<c.elements.length;p++)this.processAsnElement(a,c.elements[p],c,l,n);return l};c.prototype.processHiddenLinks=function(a,c,l,n){l||(l=document.createElement("div"),l.isWrapper=!0);for(var p=c.detailedLinks;p<c.elements.length;p++)this.processAsnElement(a,c.elements[p],c,l,n);return l};return c}();c.AsnRenderer=l})(a.html||(a.html={}))})(factfinder||(factfinder={}));
(function(a){a.isReady=!0;a.common.fireCustomEvent("ffReady",!0,!1,document)})(factfinder||(factfinder={}));export default factfinder;
